{"version":3,"file":"static/js/about.427c05c1.js","mappings":"kJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,GAAK,cAAc,MAAQL,EAAIM,WAAW,OAASN,EAAIO,YAAY,SAAW,MAAML,EAAG,SAAS,CAACM,YAAY,CAAC,QAAU,QAAQH,MAAM,CAAC,GAAK,eAAe,MAAQL,EAAIM,WAAW,OAASN,EAAIO,eAAgBP,EAAIS,OAAQP,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,IAAI,CAACF,EAAIU,GAAG,UAAUR,EAAG,MAAM,CAACE,YAAY,SAASC,MAAM,CAAC,IAAML,EAAIS,OAAO,IAAM,QAAQT,EAAIW,KAAKT,EAAG,MAAM,CAACE,YAAY,SAASI,YAAY,CAAC,aAAa,WAAW,CAACN,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIc,eAAgB,IAAG,CAACd,EAAIU,GAAG,WAAWR,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIe,eAAgB,IAAG,CAACf,EAAIU,GAAG,WAAWR,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIgB,UAAW,IAAG,CAAChB,EAAIU,GAAG,SAAS,IACt4B,EACGO,EAAkB,GCiBtB,G,QAAA,CACAC,OACA,OACAZ,WAAAA,SAAAA,gBAAAA,YACAC,YAAAA,SAAAA,gBAAAA,aACAE,OAAAA,GACAU,WAAAA,KACAC,YAAAA,KACAC,UAAAA,KACAC,WAAAA,EAEA,EACAC,UACA,oBACA,EACAC,QAAAA,CAEAV,gBACA,aACAW,EAAAA,WAAAA,SAAAA,eAAAA,gBACAA,EAAAA,YAAAA,KAAAA,WAAAA,WAAAA,MACAA,EAAAA,UAAAA,SAAAA,eAAAA,eACAA,EAAAA,UAAAA,MAAAA,QAAAA,aAEA,6BACAC,UAAAA,aAAAA,CAAAA,QAKA,0CACAA,UAAAA,aAAAA,aAAAA,SAAAA,GAEA,QACAA,UAAAA,oBACAA,UAAAA,iBACAA,UAAAA,aAGA,SAMA,2BACAC,EAAAA,KAAAA,UAAAA,EAAAA,EAAAA,EACA,IAPA,eACA,6DAOA,GAEA,SACAC,OAAAA,EACAC,MAAAA,CACAC,MAAAA,KAAAA,WACAC,OAAAA,KAAAA,YACAC,UAAAA,eAGAN,UAAAA,aACAC,aAAAM,GACAC,MAAA,YAEA,0BACAT,EAAAA,UAAAA,UAAAA,EAGAA,EAAAA,UAAAA,IAAAA,OAAAA,IAAAA,gBAAAA,GAEAA,EAAAA,UAAAA,iBAAAA,WACAA,EAAAA,UAAAA,MACA,CACA,IACAU,OAAAC,IACAC,QAAAA,IAAAA,EAAAA,GAEA,EAEArB,WACA,aAEAS,EAAAA,YAAAA,UACAA,EAAAA,UACA,EACA,EACAA,EAAAA,WACAA,EAAAA,aAGAA,EAAAA,OAAAA,KAAAA,WAAAA,UAAAA,YACA,EAEAV,gBACA,8CACA,KChH4M,I,UCOxMuB,GAAY,OACd,EACAvC,EACAkB,GACA,EACA,KACA,KACA,MAIF,EAAeqB,EAAiB,O","sources":["webpack://vue/./src/views/AboutView.vue","webpack://vue/src/views/AboutView.vue","webpack://vue/./src/views/AboutView.vue?859a","webpack://vue/./src/views/AboutView.vue?296c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"camera_outer\"},[_c('video',{attrs:{\"id\":\"videoCamera\",\"width\":_vm.videoWidth,\"height\":_vm.videoHeight,\"autoplay\":\"\"}}),_c('canvas',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"canvasCamera\",\"width\":_vm.videoWidth,\"height\":_vm.videoHeight}}),(_vm.imgSrc)?_c('div',{staticClass:\"img_bg_camera\"},[_c('p',[_vm._v(\"效果预览\")]),_c('img',{staticClass:\"tx_img\",attrs:{\"src\":_vm.imgSrc,\"alt\":\"\"}})]):_vm._e(),_c('div',{staticClass:\"button\",staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.getCompetence()}}},[_vm._v(\"打开摄像头\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.stopNavigator()}}},[_vm._v(\"关闭摄像头\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.setImage()}}},[_vm._v(\"拍照\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"camera_outer\">\r\n    <video id=\"videoCamera\" :width=\"videoWidth\" :height=\"videoHeight\" autoplay></video>\r\n    <canvas style=\"display:none;\" id=\"canvasCamera\" :width=\"videoWidth\" :height=\"videoHeight\"></canvas>\r\n    <div v-if=\"imgSrc\" class=\"img_bg_camera\">\r\n      <p>效果预览</p>\r\n      <img :src=\"imgSrc\" alt class=\"tx_img\" />\r\n    </div>\r\n    <div class=\"button\" style=\"text-align: center\">\r\n      <el-button type=\"danger\" @click=\"getCompetence() \">打开摄像头</el-button>\r\n      <el-button type=\"danger\" @click=\"stopNavigator()\">关闭摄像头</el-button>\r\n      <el-button type=\"danger\" @click=\"setImage()\">拍照</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n// @ is an alias to /src\r\nexport default {\r\n  data() {\r\n    return {\r\n      videoWidth: document.documentElement.clientWidth,\r\n      videoHeight: document.documentElement.clientHeight,\r\n      imgSrc: \"\",\r\n      thisCancas: null,\r\n      thisContext: null,\r\n      thisVideo: null,\r\n      openVideo:false\r\n    };\r\n  },\r\n  mounted(){\r\n    this.getCompetence()//进入页面就调用摄像头\r\n  },\r\n  methods: {\r\n    // 调用权限（打开摄像头功能）\r\n    getCompetence() {\r\n      const _this = this;\r\n      _this.thisCancas = document.getElementById(\"canvasCamera\");\r\n      _this.thisContext = this.thisCancas.getContext(\"2d\");\r\n      _this.thisVideo = document.getElementById(\"videoCamera\");\r\n      _this.thisVideo.style.display = 'block';\r\n      // 获取媒体属性，旧版本浏览器可能不支持mediaDevices，我们首先设置一个空对象\r\n      if (navigator.mediaDevices === undefined) {\r\n        navigator.mediaDevices = {};\r\n      }\r\n      // 一些浏览器实现了部分mediaDevices，我们不能只分配一个对象\r\n      // 使用getUserMedia，因为它会覆盖现有的属性。\r\n      // 这里，如果缺少getUserMedia属性，就添加它。\r\n      if (navigator.mediaDevices.getUserMedia === undefined) {\r\n        navigator.mediaDevices.getUserMedia = function(constraints) {\r\n          // 首先获取现存的getUserMedia(如果存在)\r\n          const getUserMedia =\r\n              navigator.webkitGetUserMedia ||\r\n              navigator.mozGetUserMedia ||\r\n              navigator.getUserMedia;\r\n          // 有些浏览器不支持，会返回错误信息\r\n          // 保持接口一致\r\n          if (!getUserMedia) {//不存在则报错\r\n            return Promise.reject(\r\n                new Error(\"getUserMedia is not implemented in this browser\")\r\n            );\r\n          }\r\n          // 否则，使用Promise将调用包装到旧的navigator.getUserMedia\r\n          return new Promise(function(resolve, reject) {\r\n            getUserMedia.call(navigator, constraints, resolve, reject);\r\n          });\r\n        };\r\n      }\r\n      const constraints = {\r\n        audio: false,\r\n        video: {\r\n          width: this.videoWidth,\r\n          height: this.videoHeight,\r\n          transform: \"scaleX(-1)\"\r\n        }\r\n      };\r\n      navigator.mediaDevices\r\n          .getUserMedia(constraints)\r\n          .then(function(stream) {\r\n            // 旧的浏览器可能没有srcObject\r\n            if (\"srcObject\" in _this.thisVideo) {\r\n              _this.thisVideo.srcObject = stream;\r\n            } else {\r\n              // 避免在新的浏览器中使用它，因为它正在被弃用。\r\n              _this.thisVideo.src = window.URL.createObjectURL(stream);\r\n            }\r\n            _this.thisVideo.onloadedmetadata = function() {\r\n              _this.thisVideo.play();\r\n            };\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n    },\r\n    //  绘制图片（拍照功能）\r\n    setImage() {\r\n      const _this = this;\r\n      // canvas画图\r\n      _this.thisContext.drawImage(\r\n          _this.thisVideo,\r\n          0,\r\n          0,\r\n          _this.videoWidth,\r\n          _this.videoHeight\r\n      );\r\n      // 获取图片base64链接\r\n      _this.imgSrc = this.thisCancas.toDataURL(\"image/png\");//赋值并预览图片\r\n    },\r\n    // 关闭摄像头\r\n    stopNavigator() {\r\n      this.thisVideo.srcObject.getTracks()[0].stop();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutView.vue?vue&type=template&id=8882e5b4&\"\nimport script from \"./AboutView.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","videoWidth","videoHeight","staticStyle","imgSrc","_v","_e","on","$event","getCompetence","stopNavigator","setImage","staticRenderFns","data","thisCancas","thisContext","thisVideo","openVideo","mounted","methods","_this","navigator","getUserMedia","audio","video","width","height","transform","constraints","then","catch","err","console","component"],"sourceRoot":""}